(self.webpackChunk_kne_components_components_ckeditor=self.webpackChunk_kne_components_components_ckeditor||[]).push([[345],{10:(e,t,o)=>{"use strict";var n=o(3884),r=o.n(n),s=o(7558),a=o(5199),i=o(9946),l=o.n(i),c=o(3050),d=o(3446);window.PUBLIC_URL="/components-ckeditor";const p={remote:"components-core",url:"https://registry.npmmirror.com",tpl:"{{url}}/@kne-components%2f{{remote}}/{{version}}/files/build",defaultVersion:"0.3.3"};(0,c.preset)({remotes:{default:p,"components-core":p,"components-iconfont":{remote:"components-iconfont",url:"https://registry.npmmirror.com",tpl:"{{url}}/@kne-components%2f{{remote}}/{{version}}/files/build",defaultVersion:"0.1.3"},"components-ckeditor":{remote:"components-ckeditor",url:"https://registry.npmmirror.com",tpl:"{{url}}/@kne-components%2f{{remote}}/{{version}}/files/build",defaultVersion:"0.2.3"}}});const m=l().create({validateStatus:function(){return!0}});(0,s.preset)({ajax:m,loading:(0,d.jsx)(a.Spin,{delay:500,style:{position:"absolute",left:"50%",padding:"10px",transform:"translateX(-50%)"}}),error:null,empty:(0,d.jsx)(a.Empty,{}),transformResponse:e=>{const{data:t}=e;return e.data={code:0===t.code?200:t.code,msg:t.msg,results:t.data},e}});var u=o(6896),h=o(4679),f=o(5499),g=o.n(f),w=(o(2135),o(781));const x=g().ExampleRoutes,y=e=>{let{preset:t,themeToken:o,...n}=e;return(0,d.jsx)(h.HashRouter,{children:(0,d.jsx)(x,{...n,paths:[{key:"components",path:"/",title:"\u9996\u9875"}],preset:t,themeToken:o,readme:w.default})})};u.createRoot(document.getElementById("root")).render((0,d.jsx)(r().StrictMode,{children:(0,d.jsx)(y,{preset:{ajax:m},themeToken:{colorPrimary:"#4F185A"}})}))},2399:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(4037);class r{constructor(e,t){this.loader=e,this.options=t,this.base64MaxWidth=t.base64MaxWidth||600,this.base64MaxHeight=t.base64MaxHeight||600}async upload(){const e=await this.loader.file;if("function"!==typeof this.options.upload){console.warn("\u5f53\u524d\u56fe\u7247\u4e0a\u4f20\u4e3abase64\u6a21\u5f0f\uff0c\u6b63\u5f0f\u73af\u5883\u8bf7\u5728preset apis\u8bbe\u7f6efile.upload,\u6216\u8005\u7ed9CKEditor\u7ec4\u4ef6\u4f20\u5165 config.ossUpload.upload\u53c2\u6570");const n=await new Promise((t=>{const o=new FileReader;o.onload=()=>{t(o.result)},o.readAsDataURL(e)}));return{default:await(t=n,o=this.base64MaxWidth,r=this.base64MaxHeight,new Promise(((e,n)=>{const s=new Image;s.src=t,s.onload=function(){const t=document.createElement("canvas"),n=t.getContext("2d"),a=s.width/o,i=s.height/r,l=Math.max(a,i,1);t.width=s.width/l,t.height=s.height/l,n.drawImage(s,0,0,t.width,t.height);const c=t.toDataURL("image/png");e(c)},s.onerror=function(e){n(e)}})))}}var t,o,r;const{data:s}=await this.options.upload({file:e});return 0!==s.code?(this.options.message.error(s.msg),{default:n.A}):{default:s.data}}}const s=function(e){const t=e.config.get("message"),o=Object.assign({},{message:t},e.config.get("ossUpload"));e.plugins.get("FileRepository").createUploadAdapter=e=>new r(e,o),e.editing.view.document.on("clipboardInput",((r,s)=>{if(e.isReadOnly)return;const a=s.dataTransfer.getData("text/html"),i=(new DOMParser).parseFromString(a,"text/html");if(0===i.querySelectorAll("img").length)return;s.content=e.data.htmlProcessor.toView("");const l=t.loading("\u7c98\u8d34\u5185\u5bb9\u4e2d\u542b\u6709\u56fe\u7247\uff0c\u6b63\u5728\u8fdb\u884c\u56fe\u7247\u4e0a\u4f20...",{duration:0});Promise.all([].slice.call(i.querySelectorAll("img"),0).map((async e=>{if("function"!==typeof o.uploadUrl)return void console.warn("\u56fe\u7247\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u5728preset apis\u8bbe\u7f6efile.uploadUrl,\u6216\u8005\u7ed9CKEditor\u7ec4\u4ef6\u4f20\u5165 config.ossUpload.uploadUrl\u53c2\u6570");const{code:t,data:r,msg:s}=await o.uploadUrl({url:e.src});if(0!==t)return console.warn(`\u56fe\u7247\u4e0a\u4f20\u5931\u8d25\uff0c${s}`),void(e.src=n.A);e.src=r}))).then((()=>{e.model.insertContent(e.data.toModel(e.data.htmlProcessor.toView(i.documentElement.outerHTML)))})).finally((()=>{l()}))}))}},5764:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=5764,e.exports=t}}]);
//# sourceMappingURL=345.2c986f92.chunk.js.map