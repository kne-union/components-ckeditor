/*! For license information please see 776.3b756578.chunk.js.LICENSE.txt */
(self.webpackChunk_kne_components_components_ckeditor=self.webpackChunk_kne_components_components_ckeditor||[]).push([[776,139,737],{82776:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var o=r(73884);const s="style_editor__sRX1d__fvNAd",n="style_word-count__8OS-O__fvNAd",a="style_surplus-count__1Ml-M__fvNAd",i="style_error__0sOJZ__fvNAd";var l=r(13050),c=r(87558),d=r(40252),u=r(98139),p=r.n(u),f=r(88529),m=r.n(f),g=r(55199),h=r(50737),_=r(70579);const y=(0,l.createWithRemoteLoader)({modules:["components-core:Global@usePreset"]})((e=>{let{remoteModules:t,children:r}=e;const[o]=t;return r(o())})),v=(0,c.createWithFetch)({loading:null,loader:async()=>(await(0,l.getOrLoadRemote)("ClassicEditor","",(0,l.getPublicPath)("components-ckeditor")+"/ckeditor/ckeditor.js"),{CKEditor:window.ClassicEditor})})((e=>{let{className:t,config:r,data:l,maxLength:c,...u}=e;const[f,v]=m()(u),{CKEditor:b}=l,[w,k]=(0,o.useState)(0),{message:x}=g.App.useApp();return(0,_.jsxs)("div",{className:p()(t,s),children:[(0,_.jsx)(y,{children:e=>{let{apis:t}=e;return(0,_.jsx)(d.CKEditor,{...u,config:Object.assign({message:x,ossUpload:{upload:t.ossStaticUpload,transform:t.ossStaticTransform}},r,{extraPlugins:[h.default]}),editor:b,data:f,onReady:e=>{const t=e.plugins.get("WordCount");k(t.characters)},onChange:(e,t)=>{const r=t.plugins.get("WordCount");if(c&&r.characters>c)return x.error("\u8f93\u5165\u5185\u5bb9\u8d85\u8fc7\u6700\u5927\u5b57\u7b26\u9650\u5236"),void t.setData(f);k(r.characters);const o=t.getData();v(o)}})}}),(0,_.jsxs)("div",{className:n,children:[(0,_.jsxs)("div",{children:["\u5f53\u524d\u5b57\u7b26:",w]}),(0,_.jsxs)("div",{className:p()(a,c&&{[i]:c-w<50}),children:["\u5269\u4f59\u5b57\u7b26:",c-w]})]})]})}));v.defaultProps={maxLength:5e3,config:{wordCount:{displayWords:!1},toolbar:{items:["undo","redo","|","heading","style","|","bold","italic","underline","strikethrough","link","bulletedList","numberedList","todoList","fontBackgroundColor","fontColor","fontSize","|","alignment","pageBreak","outdent","indent","|","specialCharacters","subscript","superscript","|","imageUpload","blockQuote","insertTable","highlight","horizontalLine","|","selectAll","removeFormat"]},list:{properties:{styles:!0,startIndex:!0,reversed:!0}},style:{definitions:[{name:"\u4e3b\u6807\u9898",element:"h2",classes:["primary-part-title"]},{name:"\u526f\u6807\u9898",element:"h3",classes:["part-title"]},{name:"\u6bb5\u843d\u5185\u5bb9",element:"p",classes:["part-content"]},{name:"\u5361\u7247",element:"p",classes:["card"]},{name:"\u91cd\u8981\u5361\u7247",element:"p",classes:["primary-card"]},{name:"\u5173\u952e\u5b57",element:"span",classes:["key-word"]}]}}};const b=(0,l.createWithRemoteLoader)({modules:["components-core:FormInfo@hooks"]})((e=>{let{remoteModules:t,...r}=e;const[o]=t,{useDecorator:s}=o;return s(Object.assign({placeholder:"\u8bf7\u8f93\u5165".concat(r.label)},r))(v)}));b.Field=v,b.Content=e=>{let{className:t,value:r}=e;return(0,_.jsx)("div",{className:p()("ck ck-content",t),dangerouslySetInnerHTML:{__html:r}})};const w=b},50737:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});r(73884);const o=r.p+"static/media/img_fail.92f698baf5c5ad60bf4437eb46f9525a.svg";class s{constructor(e,t){this.loader=e,this.options=t}async upload(){const e=await this.loader.file;if("function"!==typeof this.options.upload){return{default:await new Promise((t=>{const r=new FileReader;r.onload=()=>{t(r.result)},r.readAsDataURL(e)}))}}const{code:t,data:r,msg:s}=await this.options.upload({file:e});return 0!==t?(this.options.message.error(s),{default:o}):{default:r}}}const n=function(e){const t=e.config.get("message"),r=Object.assign({},{message:t},e.config.get("ossUpload"));e.plugins.get("FileRepository").createUploadAdapter=e=>new s(e,r),e.editing.view.document.on("clipboardInput",((s,n)=>{if(e.isReadOnly)return;const a=n.dataTransfer.getData("text/html"),i=(new DOMParser).parseFromString(a,"text/html");if(0===i.querySelectorAll("img").length)return;n.content=e.data.htmlProcessor.toView("");const l=t.loading("\u7c98\u8d34\u5185\u5bb9\u4e2d\u542b\u6709\u56fe\u7247\uff0c\u6b63\u5728\u8fdb\u884c\u56fe\u7247\u4e0a\u4f20...",{duration:0});Promise.all([].slice.call(i.querySelectorAll("img"),0).map((async e=>{if("function"!==typeof r.transform)return;const{code:t,data:s,msg:n}=await r.transform({url:e.src});if(0!==t)return console.warn("\u56fe\u7247\u4e0a\u4f20\u5931\u8d25\uff0c".concat(n)),void(e.src=o);e.src=s}))).then((()=>{e.model.insertContent(e.data.toModel(e.data.htmlProcessor.toView(i.documentElement.outerHTML)))})).finally((()=>{l()}))}))}},51153:(e,t,r)=>{"use strict";var o=r(73884),s=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var o,n={},c=null,d=null;for(o in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,o)&&!l.hasOwnProperty(o)&&(n[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===n[o]&&(n[o]=t[o]);return{$$typeof:s,type:e,key:c,ref:d,props:n,_owner:i.current}}t.jsx=c,t.jsxs=c},70579:(e,t,r)=>{"use strict";e.exports=r(51153)},98139:(e,t)=>{var r;!function(){"use strict";var o={}.hasOwnProperty;function s(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=a(e,n(r)))}return e}function n(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return s.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)o.call(e,r)&&e[r]&&(t=a(t,r));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(s.default=s,e.exports=s):void 0===(r=function(){return s}.apply(t,[]))||(e.exports=r)}()}}]);
//# sourceMappingURL=776.3b756578.chunk.js.map