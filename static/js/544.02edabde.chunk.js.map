{"version":3,"file":"static/js/544.02edabde.chunk.js","mappings":"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","sources":["../node_modules/react/cjs/react-jsx-runtime.production.min.js","components/OssUploadAdapterPlugin/index.js","../node_modules/react/jsx-runtime.js","../node_modules/classnames/index.js","../node_modules/readme/modules.js"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","import imgFail from './img_fail.svg';\n\nconst resizeBase64Image = (base64, width, height) => {\n    return new Promise((resolve, reject) => {\n        const img = new Image();\n        img.src = base64;\n\n        img.onload = function () {\n            // 创建一个 Canvas 元素\n            const canvas = document.createElement('canvas');\n            const ctx = canvas.getContext('2d');\n\n            const wRatio = img.width / width, hRatio = img.height / height;\n            const ratio = Math.max(wRatio, hRatio, 1);\n\n            // 设置 Canvas 的宽度和高度为缩放后的尺寸\n            canvas.width = img.width / ratio;\n            canvas.height = img.height / ratio;\n\n            // 将图片绘制到 Canvas 上，并缩放\n            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n\n            // 从 Canvas 中获取缩放后的图片数据，并将其转换为 Base64 格式\n            const resizedBase64 = canvas.toDataURL('image/png'); // 可以根据需要更改图片格式\n            // 调用回调函数，返回缩放后的 Base64 图片\n            resolve(resizedBase64);\n        };\n\n        img.onerror = function (error) {\n            reject(error);\n        };\n    });\n}\n\nclass OssUploadAdapter {\n    constructor(loader, options) {\n        this.loader = loader;\n        this.options = options;\n        this.base64MaxWidth = options.base64MaxWidth || 600;\n        this.base64MaxHeight = options.base64MaxHeight || 600;\n    }\n\n    async upload() {\n        const file = await this.loader.file;\n        if (typeof this.options.upload !== 'function') {\n            console.warn('当前图片上传为base64模式，正式环境请在preset apis设置file.upload,或者给CKEditor组件传入 config.ossUpload.upload参数');\n            const data = await new Promise(resolve => {\n                const fileReader = new FileReader();\n                fileReader.onload = () => {\n                    resolve(fileReader.result);\n                };\n                fileReader.readAsDataURL(file);\n            });\n\n            return {\n                default: await resizeBase64Image(data, this.base64MaxWidth, this.base64MaxHeight)\n            };\n        }\n        const {data: resData} = await this.options.upload({file});\n        if (resData.code !== 0) {\n            this.options.message.error(resData.msg);\n            return {default: imgFail};\n        }\n        return {\n            default: resData.data\n        };\n    }\n}\n\nfunction OssUploadAdapterPlugin(editor) {\n    const message = editor.config.get('message');\n    const options = Object.assign({}, {message}, editor.config.get('ossUpload'));\n    editor.plugins.get('FileRepository').createUploadAdapter = loader => {\n        return new OssUploadAdapter(loader, options);\n    };\n    editor.editing.view.document.on('clipboardInput', (evt, data) => {\n        if (editor.isReadOnly) {\n            return;\n        }\n\n        const dataTransfer = data.dataTransfer;\n        const html = dataTransfer.getData('text/html');\n        const parser = new DOMParser();\n        const domDocument = parser.parseFromString(html, 'text/html');\n        if (domDocument.querySelectorAll('img').length === 0) {\n            return;\n        }\n        data.content = editor.data.htmlProcessor.toView('');\n        const loadingClose = message.loading('粘贴内容中含有图片，正在进行图片上传...', {duration: 0});\n        Promise.all([].slice.call(domDocument.querySelectorAll('img'), 0).map(async img => {\n            if (typeof options.uploadUrl !== 'function') {\n                console.warn('图片上传失败，请在preset apis设置file.uploadUrl,或者给CKEditor组件传入 config.ossUpload.uploadUrl参数');\n                return;\n            }\n            const {code, data, msg} = await options.uploadUrl({url: img.src});\n            if (code !== 0) {\n                console.warn(`图片上传失败，${msg}`);\n                img.src = imgFail;\n                return;\n            }\n            img.src = data;\n        }))\n            .then(() => {\n                editor.model.insertContent(editor.data.toModel(editor.data.htmlProcessor.toView(domDocument.documentElement.outerHTML)));\n            })\n            .finally(() => {\n                loadingClose();\n            });\n    });\n}\n\nexport default OssUploadAdapterPlugin;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import ComponentBox from '@components/ComponentBox/README.md';\nimport Editor from '@components/Editor/README.md';export default {ComponentBox,Editor};\nexport const manifest = {\"name\":\"components-ckeditor\",\"version\":\"0.2.1\",\"open-version\":true,\"public-url\":\"/components-ckeditor\",\"modules\":[{\"name\":\"ComponentBox\",\"baseDir\":\"/home/runner/work/components-ckeditor/components-ckeditor/src/components/ComponentBox\"},{\"name\":\"Editor\",\"baseDir\":\"/home/runner/work/components-ckeditor/components-ckeditor/src/components/Editor\"}]};"],"names":["f","require","k","Symbol","for","l","m","Object","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","ref","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","type","props","_owner","current","exports","jsx","jsxs","OssUploadAdapter","constructor","loader","options","this","base64MaxWidth","base64MaxHeight","upload","file","console","warn","data","Promise","resolve","fileReader","FileReader","onload","result","readAsDataURL","default","base64","width","height","reject","img","Image","src","canvas","document","createElement","ctx","getContext","wRatio","hRatio","ratio","Math","max","drawImage","resizedBase64","toDataURL","onerror","error","resizeBase64Image","resData","code","message","msg","imgFail","editor","config","get","assign","plugins","createUploadAdapter","editing","view","on","evt","isReadOnly","html","dataTransfer","getData","domDocument","DOMParser","parseFromString","querySelectorAll","length","content","htmlProcessor","toView","loadingClose","loading","duration","all","slice","map","async","uploadUrl","url","then","model","insertContent","toModel","documentElement","outerHTML","finally","module","hasOwn","classNames","classes","i","arguments","arg","appendClass","parseValue","Array","isArray","apply","toString","includes","value","newClass","ComponentBox","Editor","manifest"],"sourceRoot":""}