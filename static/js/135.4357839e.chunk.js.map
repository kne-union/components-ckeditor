{"version":3,"file":"static/js/135.4357839e.chunk.js","mappings":"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","sources":["preset.js","App.js","bootstrap.js","components/OssUploadAdapterPlugin/index.js","../node_modules/@babel/standalone|sync"],"sourcesContent":["import React from 'react';\nimport {preset as fetchPreset} from '@kne/react-fetch';\nimport {Spin, Empty} from 'antd';\nimport axios from 'axios';\nimport {preset as remoteLoaderPreset} from '@kne/remote-loader';\n\nwindow.PUBLIC_URL = process.env.PUBLIC_URL;\n\nconst componentsCoreRemote = {\n    remote: \"components-core\",\n    url: \"https://registry.npmmirror.com\",\n    tpl: \"{{url}}/@kne-components%2f{{remote}}/{{version}}/files/build\",\n    defaultVersion: '0.3.3',\n};\n\nremoteLoaderPreset({\n    remotes: {\n        default: componentsCoreRemote,\n        'components-core': componentsCoreRemote,\n        'components-iconfont':{\n            remote: \"components-iconfont\",\n            url: \"https://registry.npmmirror.com\",\n            tpl: \"{{url}}/@kne-components%2f{{remote}}/{{version}}/files/build\",\n            defaultVersion: '0.1.3',\n        },\n        'components-ckeditor': process.env.NODE_ENV === 'development' ? {\n            remote: 'components-ckeditor', url: '/', tpl: '{{url}}'\n        } : {\n            remote: 'components-ckeditor',\n            url: 'https://registry.npmmirror.com',\n            tpl: '{{url}}/@kne-components%2f{{remote}}/{{version}}/files/build',\n            defaultVersion: process.env.DEFAULT_VERSION\n        }\n    }\n});\n\nexport const ajax = axios.create({\n    validateStatus: function () {\n        return true;\n    }\n});\n\n\nfetchPreset({\n    ajax,\n    loading: <Spin delay={500}\n                   style={{position: 'absolute', left: '50%', padding: '10px', transform: 'translateX(-50%)'}}/>,\n    error: null,\n    empty: <Empty/>,\n    transformResponse: (response) => {\n        const {data} = response;\n        response.data = {\n            code: data.code === 0 ? 200 : data.code, msg: data.msg, results: data.data\n        };\n        return response;\n    }\n});\n","import { HashRouter } from \"react-router-dom\";\nimport createEntry from \"@kne/modules-dev/dist/create-entry\";\nimport \"@kne/modules-dev/dist/create-entry.css\";\nimport readme from \"readme\";\n\nconst ExampleRoutes = createEntry.ExampleRoutes;\n\nconst App = ({ preset, themeToken, ...props }) => {\n  return (\n      <HashRouter>\n        <ExampleRoutes\n            {...props}\n            paths={[\n              {\n                key: \"components\",\n                path: \"/\",\n                title: \"首页\",\n              },\n            ]}\n            preset={preset}\n            themeToken={themeToken}\n            readme={readme}\n        />\n      </HashRouter>\n  );\n};\n\nexport default App;\n","import { ajax } from \"./preset\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport App from \"./App\";\n\nconst root = ReactDOM.createRoot(document.getElementById(\"root\"));\n\nconst themeToken = {\n  colorPrimary: \"#4F185A\",\n};\n\nroot.render(\n    <React.StrictMode>\n      <App preset={{ ajax }} themeToken={themeToken} />\n    </React.StrictMode>\n);\n","import imgFail from './img_fail.svg';\n\nclass OssUploadAdapter {\n    constructor(loader, options) {\n        this.loader = loader;\n        this.options = options;\n    }\n\n    async upload() {\n        const file = await this.loader.file;\n        if (typeof this.options.upload !== 'function') {\n            console.warn('当前图片上传为base64模式，正式环境请在preset apis设置file.upload,或者给CKEditor组件传入 config.ossUpload.upload参数');\n            const data = await new Promise(resolve => {\n                const fileReader = new FileReader();\n                fileReader.onload = () => {\n                    resolve(fileReader.result);\n                };\n                fileReader.readAsDataURL(file);\n            });\n            return {\n                default: data\n            };\n        }\n        const {code, data, msg} = await this.options.upload({file});\n        if (code !== 0) {\n            this.options.message.error(msg);\n            return {default: imgFail};\n        }\n        return {\n            default: data\n        };\n    }\n}\n\nfunction OssUploadAdapterPlugin(editor) {\n    const message = editor.config.get('message');\n    const options = Object.assign({}, {message}, editor.config.get('ossUpload'));\n    editor.plugins.get('FileRepository').createUploadAdapter = loader => {\n        return new OssUploadAdapter(loader, options);\n    };\n    editor.editing.view.document.on('clipboardInput', (evt, data) => {\n        if (editor.isReadOnly) {\n            return;\n        }\n\n        const dataTransfer = data.dataTransfer;\n        const html = dataTransfer.getData('text/html');\n        const parser = new DOMParser();\n        const domDocument = parser.parseFromString(html, 'text/html');\n        if (domDocument.querySelectorAll('img').length === 0) {\n            return;\n        }\n        data.content = editor.data.htmlProcessor.toView('');\n        const loadingClose = message.loading('粘贴内容中含有图片，正在进行图片上传...', {duration: 0});\n        Promise.all([].slice.call(domDocument.querySelectorAll('img'), 0).map(async img => {\n            if (typeof options.uploadUrl !== 'function') {\n                console.warn('图片上传失败，请在preset apis设置file.uploadUrl,或者给CKEditor组件传入 config.ossUpload.uploadUrl参数');\n                return;\n            }\n            const {code, data, msg} = await options.uploadUrl({url: img.src});\n            if (code !== 0) {\n                console.warn(`图片上传失败，${msg}`);\n                img.src = imgFail;\n                return;\n            }\n            img.src = data;\n        }))\n            .then(() => {\n                editor.model.insertContent(editor.data.toModel(editor.data.htmlProcessor.toView(domDocument.documentElement.outerHTML)));\n            })\n            .finally(() => {\n                loadingClose();\n            });\n    });\n}\n\nexport default OssUploadAdapterPlugin;\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 5764;\nmodule.exports = webpackEmptyContext;"],"names":["window","PUBLIC_URL","process","componentsCoreRemote","remote","url","tpl","defaultVersion","remoteLoaderPreset","remotes","default","ajax","axios","validateStatus","fetchPreset","loading","_jsx","Spin","delay","style","position","left","padding","transform","error","empty","Empty","transformResponse","response","data","code","msg","results","ExampleRoutes","createEntry","_ref","preset","themeToken","props","HashRouter","children","paths","key","path","title","readme","ReactDOM","document","getElementById","render","React","App","colorPrimary","OssUploadAdapter","constructor","loader","options","this","upload","file","console","warn","Promise","resolve","fileReader","FileReader","onload","result","readAsDataURL","message","imgFail","editor","config","get","Object","assign","plugins","createUploadAdapter","editing","view","on","evt","isReadOnly","html","dataTransfer","getData","domDocument","DOMParser","parseFromString","querySelectorAll","length","content","htmlProcessor","toView","loadingClose","duration","all","slice","call","map","async","uploadUrl","img","src","then","model","insertContent","toModel","documentElement","outerHTML","finally","webpackEmptyContext","req","e","Error","keys","id","module","exports"],"sourceRoot":""}