/*! For license information please see 647.0e1ba932.chunk.js.LICENSE.txt */
(self.webpackChunk_kne_components_components_ckeditor=self.webpackChunk_kne_components_components_ckeditor||[]).push([[647,156,616],{43647:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>k});var r=o(73884);const s="style_editor__sRX1d__fhtbg",n="style_word-count__8OS-O__fhtbg",a="style_surplus-count__1Ml-M__fhtbg",i="style_error__0sOJZ__fhtbg";var l=o(13050);const c=(0,o(87558).createWithFetch)({loading:null,loader:async()=>(await(0,l.getOrLoadRemote)("ClassicEditor","",(0,l.getPublicPath)("components-ckeditor")+"/ckeditor/ckeditor.js"),{CKEditor:window.ClassicEditor})});var d=o(40252),u=o(34156),p=o.n(u),f=o(88529),m=o.n(f),g=o(5235),h=o(55199),_=o(23446);const y=(0,l.createWithRemoteLoader)({modules:["components-core:Global@usePreset"]})((e=>{let{remoteModules:t,children:o}=e;const[r]=t;return o(r())})),b=c((e=>{let{className:t,config:o,pluginLoaders:l,data:c,maxLength:u,...f}=e;const[b,v]=m()(f),{CKEditor:w}=c,[k,C]=(0,r.useState)(0),{message:S}=h.App.useApp(),x=l.map((e=>e(w.libs)));return(0,_.jsxs)("div",{className:p()(t,s),children:[(0,_.jsx)(y,{children:e=>{let{apis:t}=e;return(0,_.jsx)(d.CKEditor,{...f,config:Object.assign({message:S,ossUpload:{upload:t.ossStaticUpload,transform:t.ossStaticTransform}},o,{extraPlugins:[g.default,...x]}),editor:w,data:b,onReady:e=>{const t=e.plugins.get("WordCount");C(t.characters)},onChange:(e,t)=>{const o=t.plugins.get("WordCount");if(u&&o.characters>u)return S.error("\u8f93\u5165\u5185\u5bb9\u8d85\u8fc7\u6700\u5927\u5b57\u7b26\u9650\u5236"),void t.setData(b);C(o.characters);const r=t.getData();v(r)}})}}),(0,_.jsxs)("div",{className:n,children:[(0,_.jsxs)("div",{children:["\u5f53\u524d\u5b57\u7b26:",k]}),(0,_.jsxs)("div",{className:p()(a,u&&{[i]:u-k<50}),children:["\u5269\u4f59\u5b57\u7b26:",u-k]})]})]})})),v={wordCount:{displayWords:!1},toolbar:{items:["undo","redo","|","heading","style","|","bold","italic","underline","strikethrough","link","bulletedList","numberedList","todoList","fontBackgroundColor","fontColor","fontSize","|","alignment","pageBreak","outdent","indent","|","specialCharacters","subscript","superscript","|","imageUpload","blockQuote","insertTable","highlight","horizontalLine","|","selectAll","removeFormat"]},list:{properties:{styles:!0,startIndex:!0,reversed:!0}},style:{definitions:[{name:"\u4e3b\u6807\u9898",element:"h2",classes:["primary-part-title"]},{name:"\u526f\u6807\u9898",element:"h3",classes:["part-title"]},{name:"\u6bb5\u843d\u5185\u5bb9",element:"p",classes:["part-content"]},{name:"\u5361\u7247",element:"p",classes:["card"]},{name:"\u91cd\u8981\u5361\u7247",element:"p",classes:["primary-card"]},{name:"\u5173\u952e\u5b57",element:"span",classes:["key-word"]}]}};b.defaultProps={maxLength:5e3,pluginLoaders:[],config:v};const w=(0,l.createWithRemoteLoader)({modules:["components-core:FormInfo@hooks"]})((e=>{let{remoteModules:t,...o}=e;const[r]=t,{useDecorator:s}=r;return s(Object.assign({placeholder:"\u8bf7\u8f93\u5165".concat(o.label)},o))(b)}));w.Field=b,w.Content=e=>{let{className:t,value:o}=e;return(0,_.jsx)("div",{className:p()("ck ck-content",t),dangerouslySetInnerHTML:{__html:o}})},w.defaultEditorConfig=v;const k=w},5235:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});o(73884);const r=o.p+"static/media/img_fail.92f698baf5c5ad60bf4437eb46f9525a.svg";class s{constructor(e,t){this.loader=e,this.options=t}async upload(){const e=await this.loader.file;if("function"!==typeof this.options.upload){console.warn("\u5f53\u524d\u56fe\u7247\u4e0a\u4f20\u4e3abase64\u6a21\u5f0f\uff0c\u6b63\u5f0f\u73af\u5883\u8bf7\u5728preset apis\u8bbe\u7f6eossStaticUpload,\u6216\u8005\u7ed9CKEditor\u7ec4\u4ef6\u4f20\u5165 config.ossUpload.upload\u53c2\u6570");return{default:await new Promise((t=>{const o=new FileReader;o.onload=()=>{t(o.result)},o.readAsDataURL(e)}))}}const{code:t,data:o,msg:s}=await this.options.upload({file:e});return 0!==t?(this.options.message.error(s),{default:r}):{default:o}}}const n=function(e){const t=e.config.get("message"),o=Object.assign({},{message:t},e.config.get("ossUpload"));e.plugins.get("FileRepository").createUploadAdapter=e=>new s(e,o),e.editing.view.document.on("clipboardInput",((s,n)=>{if(e.isReadOnly)return;const a=n.dataTransfer.getData("text/html"),i=(new DOMParser).parseFromString(a,"text/html");if(0===i.querySelectorAll("img").length)return;n.content=e.data.htmlProcessor.toView("");const l=t.loading("\u7c98\u8d34\u5185\u5bb9\u4e2d\u542b\u6709\u56fe\u7247\uff0c\u6b63\u5728\u8fdb\u884c\u56fe\u7247\u4e0a\u4f20...",{duration:0});Promise.all([].slice.call(i.querySelectorAll("img"),0).map((async e=>{if("function"!==typeof o.transform)return void console.warn("\u56fe\u7247\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u5728preset apis\u8bbe\u7f6eossStaticTransform,\u6216\u8005\u7ed9CKEditor\u7ec4\u4ef6\u4f20\u5165 config.ossUpload.transform\u53c2\u6570");const{code:t,data:s,msg:n}=await o.transform({url:e.src});if(0!==t)return console.warn("\u56fe\u7247\u4e0a\u4f20\u5931\u8d25\uff0c".concat(n)),void(e.src=r);e.src=s}))).then((()=>{e.model.insertContent(e.data.toModel(e.data.htmlProcessor.toView(i.documentElement.outerHTML)))})).finally((()=>{l()}))}))}},70998:(e,t,o)=>{"use strict";var r=o(73884),s=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,o){var r,n={},c=null,d=null;for(r in void 0!==o&&(c=""+o),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===n[r]&&(n[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:d,props:n,_owner:i.current}}t.jsx=c,t.jsxs=c},23446:(e,t,o)=>{"use strict";e.exports=o(70998)},34156:(e,t)=>{var o;!function(){"use strict";var r={}.hasOwnProperty;function s(){for(var e="",t=0;t<arguments.length;t++){var o=arguments[t];o&&(e=a(e,n(o)))}return e}function n(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return s.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var o in e)r.call(e,o)&&e[o]&&(t=a(t,o));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(s.default=s,e.exports=s):void 0===(o=function(){return s}.apply(t,[]))||(e.exports=o)}()}}]);
//# sourceMappingURL=647.0e1ba932.chunk.js.map