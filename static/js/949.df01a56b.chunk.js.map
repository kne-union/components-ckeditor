{"version":3,"file":"static/js/949.df01a56b.chunk.js","mappings":"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","sources":["webpack://@kne-components/components-ckeditor/./src/components/Editor/style.module.scss?0dee","components/Editor/index.js","components/OssUploadAdapterPlugin/img_fail.svg","components/OssUploadAdapterPlugin/index.js","../node_modules/react/cjs/react-jsx-runtime.production.min.js","../node_modules/react/jsx-runtime.js","components/OssUploadAdapterPlugin/README.md","../node_modules/readme/modules.js","components/Editor/README.md","../node_modules/classnames/index.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"editor\":\"style_editor__sRX1d__ARnBi\",\"word-count\":\"style_word-count__8OS-O__ARnBi\",\"surplus-count\":\"style_surplus-count__1Ml-M__ARnBi\",\"error\":\"style_error__0sOJZ__ARnBi\"};","import {useState} from \"react\";\nimport style from \"./style.module.scss\";\nimport {\n    createWithRemoteLoader, getOrLoadRemote, getPublicPath,\n} from \"@kne/remote-loader\";\nimport {createWithFetch} from \"@kne/react-fetch\";\nimport {CKEditor as CKEditorReact} from \"@ckeditor/ckeditor5-react\";\nimport classnames from \"classnames\";\nimport useControlValue from \"@kne/use-control-value\";\nimport {App} from \"antd\";\nimport OssUploadAdapterPlugin from \"@components/OssUploadAdapterPlugin\";\nimport './ckeditor.scss';\n\nconst CKContent = ({className, value}) => {\n    return (<div\n        className={classnames(\"ck ck-content\", className)}\n        dangerouslySetInnerHTML={{__html: value}}\n    />);\n};\n\nconst Preset = createWithRemoteLoader({\n    modules: [\"components-core:Global@usePreset\"],\n})(({remoteModules, children}) => {\n    const [usePreset] = remoteModules;\n    const preset = usePreset();\n    return children(preset);\n});\n\nconst CKEditorField = createWithFetch({\n    loading: null, loader: async () => {\n        await getOrLoadRemote(\"ClassicEditor\", \"\", getPublicPath(\"components-ckeditor\") + \"/ckeditor/ckeditor.js\");\n        return {CKEditor: window.ClassicEditor};\n    },\n})(({className, config, data, maxLength, ...props}) => {\n    const [value, onChange] = useControlValue(props);\n    const {CKEditor} = data;\n    const [currentCharacters, setCurrentCharacters] = useState(0);\n    const {message} = App.useApp();\n\n    return (<div className={classnames(className, style[\"editor\"])}>\n        <Preset>\n            {({apis}) => {\n                return (<CKEditorReact\n                    {...props}\n                    config={Object.assign({\n                        message, ossUpload: {\n                            upload: apis.ossStaticUpload, transform: apis.ossStaticTransform,\n                        },\n                    }, config, {\n                        extraPlugins: [OssUploadAdapterPlugin],\n                    })}\n                    editor={CKEditor}\n                    data={value}\n                    onReady={(editor) => {\n                        const wordCountPlugin = editor.plugins.get(\"WordCount\");\n                        setCurrentCharacters(wordCountPlugin.characters);\n                    }}\n                    onChange={(event, editor) => {\n                        const wordCountPlugin = editor.plugins.get(\"WordCount\");\n                        if (maxLength && wordCountPlugin.characters > maxLength) {\n                            message.error(\"输入内容超过最大字符限制\");\n                            editor.setData(value);\n                            return;\n                        }\n                        setCurrentCharacters(wordCountPlugin.characters);\n                        const data = editor.getData();\n                        onChange(data);\n                    }}\n                />);\n            }}\n        </Preset>\n        <div className={style[\"word-count\"]}>\n            <div>当前字符:{currentCharacters}</div>\n            <div\n                className={classnames(style[\"surplus-count\"], maxLength && {\n                    [style[\"error\"]]: maxLength - currentCharacters < 50,\n                })}\n            >\n                剩余字符:{maxLength - currentCharacters}\n            </div>\n        </div>\n    </div>);\n});\n\nCKEditorField.defaultProps = {\n    maxLength: 5000, config: {\n        wordCount: {displayWords: false}, toolbar: {\n            items: [\"undo\", \"redo\", \"|\", \"heading\", \"style\", \"|\", \"bold\", \"italic\", \"underline\", \"strikethrough\", \"link\", \"bulletedList\", \"numberedList\", \"todoList\", \"fontBackgroundColor\", \"fontColor\", \"fontSize\", \"|\", \"alignment\", \"pageBreak\", \"outdent\", \"indent\", \"|\", \"specialCharacters\", \"subscript\", \"superscript\", \"|\", \"imageUpload\", \"blockQuote\", \"insertTable\", \"highlight\", \"horizontalLine\", \"|\", \"selectAll\", \"removeFormat\"],\n        }, list: {\n            properties: {\n                styles: true, startIndex: true, reversed: true,\n            },\n        }, style: {\n            definitions: [{\n                name: \"主标题\", element: \"h2\", classes: [\"primary-part-title\"],\n            }, {\n                name: \"副标题\", element: \"h3\", classes: [\"part-title\"],\n            }, {\n                name: \"段落内容\", element: \"p\", classes: [\"part-content\"],\n            }, {\n                name: \"卡片\", element: \"p\", classes: [\"card\"],\n            }, {\n                name: \"重要卡片\", element: \"p\", classes: [\"primary-card\"],\n            }, {\n                name: \"关键字\", element: \"span\", classes: [\"key-word\"],\n            },],\n        },\n    },\n};\n\nconst CKEditor = createWithRemoteLoader({\n    modules: [\"components-core:FormInfo@hooks\"],\n})(({remoteModules, ...props}) => {\n    const [hooks] = remoteModules;\n    const {useDecorator} = hooks;\n    const render = useDecorator(Object.assign({placeholder: `请输入${props.label}`}, props));\n    return render(CKEditorField);\n});\n\nCKEditor.Field = CKEditorField;\nCKEditor.Content = CKContent;\nexport default CKEditor;\n","var _path, _path2;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgImgFail(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    t: 1695715120961,\n    className: \"icon\",\n    viewBox: \"0 0 1024 1024\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"p-id\": 2413,\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 200,\n    height: 200,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M696.43 465.25c40.61 0 73.53-32.72 73.53-73.09s-32.96-73.08-73.53-73.08-73.54 32.72-73.54 73.08 32.92 73.09 73.54 73.09zM535.74 650.62l-273.61-259.4a56.19 56.19 0 0 0-15.36 11.58l-114 119.63-6-222.77c-0.73-26.82 20.84-49.41 47.67-50.14l201.77-5.44 47.34-50-250.43 6.75C119 202.33 76.33 247.17 77.78 301l7.32 271.4 4.5 166.78C91.06 793 136.05 835.47 190.2 834l176-4.75 12-0.32 47.34-50 116.18-122.64z\",\n    \"p-id\": 2414\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M861.71 214.8l-242.83-33.86-55.09 41.46L855 263a49.05 49.05 0 0 1 41.79 55.13l-54.33 389.59-120.87-159.05A59.86 59.86 0 0 0 638.06 537l-44 33.08 65.07 86.15L603.84 698l-79.57 60.1-54.92 41.48 34.17 4.76 270.73 37.76a97.55 97.55 0 0 0 109.88-79.6 22.37 22.37 0 0 0 0.65-3.44l60.53-434.16c7.44-53.32-29.95-102.62-83.6-110.1z\",\n    \"p-id\": 2415\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgImgFail);\nexport default __webpack_public_path__ + \"static/media/img_fail.92f698baf5c5ad60bf4437eb46f9525a.svg\";\nexport { ForwardRef as ReactComponent };","import imgFail from \"./img_fail.svg\";\n\nclass OssUploadAdapter {\n    constructor(loader, options) {\n        this.loader = loader;\n        this.options = options;\n    }\n\n    async upload() {\n        const file = await this.loader.file;\n        if (typeof this.options.upload !== \"function\") {\n            process.env.NODE_ENV === 'development' && console.warn(\n                \"当前图片上传为base64模式，正式环境请在preset apis设置ossStaticUpload,或者给CKEditor组件传入 config.ossUpload.upload参数\"\n            );\n            const data = await new Promise((resolve) => {\n                const fileReader = new FileReader();\n                fileReader.onload = () => {\n                    resolve(fileReader.result);\n                };\n                fileReader.readAsDataURL(file);\n            });\n            return {\n                default: data,\n            };\n        }\n        const { code, data, msg } = await this.options.upload({ file });\n        if (code !== 0) {\n            this.options.message.error(msg);\n            return { default: imgFail };\n        }\n        return {\n            default: data,\n        };\n    }\n}\n\nfunction OssUploadAdapterPlugin(editor) {\n    const message = editor.config.get(\"message\");\n    const options = Object.assign(\n        {},\n        { message },\n        editor.config.get(\"ossUpload\")\n    );\n    editor.plugins.get(\"FileRepository\").createUploadAdapter = (loader) => {\n        return new OssUploadAdapter(loader, options);\n    };\n    editor.editing.view.document.on(\"clipboardInput\", (evt, data) => {\n        if (editor.isReadOnly) {\n            return;\n        }\n\n        const dataTransfer = data.dataTransfer;\n        const html = dataTransfer.getData(\"text/html\");\n        const parser = new DOMParser();\n        const domDocument = parser.parseFromString(html, \"text/html\");\n        if (domDocument.querySelectorAll(\"img\").length === 0) {\n            return;\n        }\n        data.content = editor.data.htmlProcessor.toView(\"\");\n        const loadingClose = message.loading(\n            \"粘贴内容中含有图片，正在进行图片上传...\",\n            { duration: 0 }\n        );\n        Promise.all(\n            [].slice.call(domDocument.querySelectorAll(\"img\"), 0).map(async (img) => {\n                if (typeof options.transform !== \"function\") {\n                    process.env.NODE_ENV === 'development' && console.warn(\n                        \"如果后端上传返回ossId导致图片不能正常显示，请在preset apis设置ossStaticTransform,或者给CKEditor组件传入 config.ossUpload.transform参数\"\n                    );\n                    return;\n                }\n                const { code, data, msg } = await options.transform({ url: img.src });\n                if (code !== 0) {\n                    console.warn(`图片上传失败，${msg}`);\n                    img.src = imgFail;\n                    return;\n                }\n                img.src = data;\n            })\n        )\n            .then(() => {\n                editor.model.insertContent(\n                    editor.data.toModel(\n                        editor.data.htmlProcessor.toView(\n                            domDocument.documentElement.outerHTML\n                        )\n                    )\n                );\n            })\n            .finally(() => {\n                loadingClose();\n            });\n    });\n}\n\nexport default OssUploadAdapterPlugin;\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","import * as component_2 from '@components/OssUploadAdapterPlugin';\nimport * as component_3 from '@components/Editor';\nconst readmeConfig = {\n    name: `OssUploadAdapterPlugin`,\n    summary: `<p>富文本编辑器ckeditor的OSS图片上传适配器，Editor组件已经默认内置，不需要单独安装配置</p>`,\n    \n    \n    api: `<table>\n<thead>\n<tr>\n<th>属性名</th>\n<th>说明</th>\n<th>类型</th>\n<th>默认值</th>\n</tr>\n</thead>\n</table>`,\n    example: {\n        isFull: false,\n        className: `OssUploadAdapterPlugin_5f179`,\n        style: ``,\n        list: [{\n    title: `这里填写示例标题`,\n    description: `这里填写示例说明`,\n    code: `const {default: Editor} = _Editor;\nconst {useState} = React;\nconst BaseExample = () => {\n    const [value, onChange] = useState(\"<p>请输入内容</p>\");\n    return <div>\n        <Editor.Field value={value} onChange={onChange} config={{\n            toolbar: {\n                items: [\"imageUpload\"]\n            }\n        }}/>\n        <div>预览：</div>\n        <Editor.Content value={value}/>\n    </div>;\n};\n\nrender(<BaseExample/>);\n\n`,\n    scope: [{\n    name: \"_OssUploadAdapterPlugin\",\n    packageName: \"@components/OssUploadAdapterPlugin\",\n    component: component_2\n},{\n    name: \"_Editor\",\n    packageName: \"@components/Editor\",\n    component: component_3\n}]\n}]\n    }\n};\nexport default readmeConfig;\n","import Editor from '@components/Editor/README.md';\nimport OssUploadAdapterPlugin from '@components/OssUploadAdapterPlugin/README.md';export default {Editor,OssUploadAdapterPlugin};\nexport const manifest = {\"name\":\"components-ckeditor\",\"version\":\"0.1.0\",\"open-version\":true,\"public-url\":\"/components-ckeditor\",\"modules\":[{\"name\":\"Editor\",\"baseDir\":\"/home/runner/work/components-ckeditor/components-ckeditor/src/components/Editor\"},{\"name\":\"OssUploadAdapterPlugin\",\"baseDir\":\"/home/runner/work/components-ckeditor/components-ckeditor/src/components/OssUploadAdapterPlugin\"}]};","import * as component_1 from '@components/Editor';\nconst readmeConfig = {\n    name: `Editor`,\n    summary: `<p>富文本编辑器ckeditor的封装</p>`,\n    \n    \n    api: `<table>\n<thead>\n<tr>\n<th>属性名</th>\n<th>说明</th>\n<th>类型</th>\n<th>默认值</th>\n</tr>\n</thead>\n</table>`,\n    example: {\n        isFull: false,\n        className: `Editor_344a7`,\n        style: ``,\n        list: [{\n    title: `这里填写示例标题`,\n    description: `这里填写示例说明`,\n    code: `const {default: Editor} = _Editor;\nconst { useState } = React;\nconst BaseExample = () => {\n    const [value, onChange] = useState(\"<p>请输入内容</p>\");\n    return <div>\n        <Editor.Field value={value} onChange={onChange}/>\n        <div>预览：</div>\n        <Editor.Content value={value}/>\n    </div>;\n};\n\nrender(<BaseExample/>);\n\n`,\n    scope: [{\n    name: \"_Editor\",\n    packageName: \"@components/Editor\",\n    component: component_1\n}]\n}]\n    }\n};\nexport default readmeConfig;\n","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n"],"names":["Preset","createWithRemoteLoader","modules","_ref2","remoteModules","children","usePreset","CKEditorField","createWithFetch","loading","loader","async","getOrLoadRemote","getPublicPath","CKEditor","window","ClassicEditor","_ref3","className","config","data","maxLength","props","value","onChange","useControlValue","currentCharacters","setCurrentCharacters","useState","message","App","useApp","_jsxs","classnames","style","_jsx","_ref4","apis","CKEditorReact","Object","assign","ossUpload","upload","ossStaticUpload","transform","ossStaticTransform","extraPlugins","OssUploadAdapterPlugin","editor","onReady","wordCountPlugin","plugins","get","characters","event","error","setData","getData","defaultProps","wordCount","displayWords","toolbar","items","list","properties","styles","startIndex","reversed","definitions","name","element","classes","_ref5","hooks","useDecorator","placeholder","concat","label","render","Field","Content","_ref","dangerouslySetInnerHTML","__html","OssUploadAdapter","constructor","options","this","file","default","Promise","resolve","fileReader","FileReader","onload","result","readAsDataURL","code","msg","imgFail","createUploadAdapter","editing","view","document","on","evt","isReadOnly","html","dataTransfer","domDocument","DOMParser","parseFromString","querySelectorAll","length","content","htmlProcessor","toView","loadingClose","duration","all","slice","call","map","url","img","src","console","warn","then","model","insertContent","toModel","documentElement","outerHTML","finally","f","require","k","Symbol","for","l","m","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","ref","__self","__source","q","c","a","g","b","d","e","h","$$typeof","type","_owner","current","exports","jsx","jsxs","module","Editor","summary","api","example","isFull","title","description","scope","packageName","component","manifest","hasOwn","classNames","i","arguments","arg","appendClass","parseValue","Array","isArray","apply","toString","includes","newClass"],"sourceRoot":""}