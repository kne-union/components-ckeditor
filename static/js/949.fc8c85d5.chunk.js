/*! For license information please see 949.fc8c85d5.chunk.js.LICENSE.txt */
(self.webpackChunk_kne_components_components_ckeditor=self.webpackChunk_kne_components_components_ckeditor||[]).push([[949,139,776,737],{82776:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var o=n(73884);const r="style_editor__sRX1d__fvNAd",a="style_word-count__8OS-O__fvNAd",s="style_surplus-count__1Ml-M__fvNAd",i="style_error__0sOJZ__fvNAd";var l=n(13050),c=n(87558),d=n(40252),u=n(98139),m=n.n(u),p=n(88529),f=n.n(p),h=n(55199),g=n(50737),_=n(70579);const v=(0,l.createWithRemoteLoader)({modules:["components-core:Global@usePreset"]})((e=>{let{remoteModules:t,children:n}=e;const[o]=t;return n(o())})),y=(0,c.createWithFetch)({loading:null,loader:async()=>(await(0,l.getOrLoadRemote)("ClassicEditor","",(0,l.getPublicPath)("components-ckeditor")+"/ckeditor/ckeditor.js"),{CKEditor:window.ClassicEditor})})((e=>{let{className:t,config:n,data:l,maxLength:c,...u}=e;const[p,y]=f()(u),{CKEditor:E}=l,[k,b]=(0,o.useState)(0),{message:S}=h.App.useApp();return(0,_.jsxs)("div",{className:m()(t,r),children:[(0,_.jsx)(v,{children:e=>{let{apis:t}=e;return(0,_.jsx)(d.CKEditor,{...u,config:Object.assign({message:S,ossUpload:{upload:t.ossStaticUpload,transform:t.ossStaticTransform}},n,{extraPlugins:[g.default]}),editor:E,data:p,onReady:e=>{const t=e.plugins.get("WordCount");b(t.characters)},onChange:(e,t)=>{const n=t.plugins.get("WordCount");if(c&&n.characters>c)return S.error("\u8f93\u5165\u5185\u5bb9\u8d85\u8fc7\u6700\u5927\u5b57\u7b26\u9650\u5236"),void t.setData(p);b(n.characters);const o=t.getData();y(o)}})}}),(0,_.jsxs)("div",{className:a,children:[(0,_.jsxs)("div",{children:["\u5f53\u524d\u5b57\u7b26:",k]}),(0,_.jsxs)("div",{className:m()(s,c&&{[i]:c-k<50}),children:["\u5269\u4f59\u5b57\u7b26:",c-k]})]})]})}));y.defaultProps={maxLength:5e3,config:{wordCount:{displayWords:!1},toolbar:{items:["undo","redo","|","heading","style","|","bold","italic","underline","strikethrough","link","bulletedList","numberedList","todoList","fontBackgroundColor","fontColor","fontSize","|","alignment","pageBreak","outdent","indent","|","specialCharacters","subscript","superscript","|","imageUpload","blockQuote","insertTable","highlight","horizontalLine","|","selectAll","removeFormat"]},list:{properties:{styles:!0,startIndex:!0,reversed:!0}},style:{definitions:[{name:"\u4e3b\u6807\u9898",element:"h2",classes:["primary-part-title"]},{name:"\u526f\u6807\u9898",element:"h3",classes:["part-title"]},{name:"\u6bb5\u843d\u5185\u5bb9",element:"p",classes:["part-content"]},{name:"\u5361\u7247",element:"p",classes:["card"]},{name:"\u91cd\u8981\u5361\u7247",element:"p",classes:["primary-card"]},{name:"\u5173\u952e\u5b57",element:"span",classes:["key-word"]}]}}};const E=(0,l.createWithRemoteLoader)({modules:["components-core:FormInfo@hooks"]})((e=>{let{remoteModules:t,...n}=e;const[o]=t,{useDecorator:r}=o;return r(Object.assign({placeholder:"\u8bf7\u8f93\u5165".concat(n.label)},n))(y)}));E.Field=y,E.Content=e=>{let{className:t,value:n}=e;return(0,_.jsx)("div",{className:m()("ck ck-content",t),dangerouslySetInnerHTML:{__html:n}})};const k=E},50737:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});n(73884);const o=n.p+"static/media/img_fail.92f698baf5c5ad60bf4437eb46f9525a.svg";class r{constructor(e,t){this.loader=e,this.options=t}async upload(){const e=await this.loader.file;if("function"!==typeof this.options.upload){return{default:await new Promise((t=>{const n=new FileReader;n.onload=()=>{t(n.result)},n.readAsDataURL(e)}))}}const{code:t,data:n,msg:r}=await this.options.upload({file:e});return 0!==t?(this.options.message.error(r),{default:o}):{default:n}}}const a=function(e){const t=e.config.get("message"),n=Object.assign({},{message:t},e.config.get("ossUpload"));e.plugins.get("FileRepository").createUploadAdapter=e=>new r(e,n),e.editing.view.document.on("clipboardInput",((r,a)=>{if(e.isReadOnly)return;const s=a.dataTransfer.getData("text/html"),i=(new DOMParser).parseFromString(s,"text/html");if(0===i.querySelectorAll("img").length)return;a.content=e.data.htmlProcessor.toView("");const l=t.loading("\u7c98\u8d34\u5185\u5bb9\u4e2d\u542b\u6709\u56fe\u7247\uff0c\u6b63\u5728\u8fdb\u884c\u56fe\u7247\u4e0a\u4f20...",{duration:0});Promise.all([].slice.call(i.querySelectorAll("img"),0).map((async e=>{if("function"!==typeof n.transform)return;const{code:t,data:r,msg:a}=await n.transform({url:e.src});if(0!==t)return console.warn("\u56fe\u7247\u4e0a\u4f20\u5931\u8d25\uff0c".concat(a)),void(e.src=o);e.src=r}))).then((()=>{e.model.insertContent(e.data.toModel(e.data.htmlProcessor.toView(i.documentElement.outerHTML)))})).finally((()=>{l()}))}))}},51153:(e,t,n)=>{"use strict";var o=n(73884),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var o,a={},c=null,d=null;for(o in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,o)&&!l.hasOwnProperty(o)&&(a[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===a[o]&&(a[o]=t[o]);return{$$typeof:r,type:e,key:c,ref:d,props:a,_owner:i.current}}t.jsx=c,t.jsxs=c},70579:(e,t,n)=>{"use strict";e.exports=n(51153)},47949:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r,manifest:()=>a});var o=n(82776);const r={Editor:{name:"Editor",summary:"<p>\u5bcc\u6587\u672c\u7f16\u8f91\u5668ckeditor\u7684\u5c01\u88c5</p>",api:"<table>\n<thead>\n<tr>\n<th>\u5c5e\u6027\u540d</th>\n<th>\u8bf4\u660e</th>\n<th>\u7c7b\u578b</th>\n<th>\u9ed8\u8ba4\u503c</th>\n</tr>\n</thead>\n</table>",example:{isFull:!1,className:"Editor_344a7",style:"",list:[{title:"\u8fd9\u91cc\u586b\u5199\u793a\u4f8b\u6807\u9898",description:"\u8fd9\u91cc\u586b\u5199\u793a\u4f8b\u8bf4\u660e",code:'const {default: Editor} = _Editor;\nconst { useState } = React;\nconst BaseExample = () => {\n    const [value, onChange] = useState("<p>\u8bf7\u8f93\u5165\u5185\u5bb9</p>");\n    return <div>\n        <Editor.Field value={value} onChange={onChange}/>\n        <div>\u9884\u89c8\uff1a</div>\n        <Editor.Content value={value}/>\n    </div>;\n};\n\nrender(<BaseExample/>);\n\n',scope:[{name:"_Editor",packageName:"@components/Editor",component:o}]},{title:"\u5728\u8868\u5355\u4e2d\u4f7f\u7528",description:"\u5728\u8868\u5355\u4e2d\u4f7f\u7528",code:'const { default: CKEditor } = _Editor;\nconst { createWithRemoteLoader } = remoteLoader;\nconst BaseExample = createWithRemoteLoader({\n    modules: ["components-core:FormInfo", "components-core:FormInfo@formModule"],\n})(({ remoteModules }) => {\n    const [FormInfo, formModule] = remoteModules;\n    const { Form, SubmitButton } = formModule;\n    return (\n        <Form\n            data={{\n                des: \'\u5bcc\u6587\u672c\u5185\u5bb9\',\n            }}\n            onSubmit={(data) => {\n                console.log(data);\n            }}\n        >\n            <FormInfo\n                title="\u5728\u8868\u5355\u4e2d\u4f7f\u7528"\n                column={1}\n                list={[<CKEditor label="\u5bcc\u6587\u672c" name="des" />]}\n                rule="REQ"\n            />\n            <SubmitButton type="primary" block>\n                \u63d0\u4ea4\n            </SubmitButton>\n        </Form>\n    );\n});\n\nrender(<BaseExample />);\n\n',scope:[{name:"_Editor",packageName:"@components/Editor",component:o},{name:"remoteLoader",packageName:"@kne/remote-loader",component:n(13050)}]}]}},OssUploadAdapterPlugin:{name:"OssUploadAdapterPlugin",summary:"<p>\u5bcc\u6587\u672c\u7f16\u8f91\u5668ckeditor\u7684OSS\u56fe\u7247\u4e0a\u4f20\u9002\u914d\u5668\uff0cEditor\u7ec4\u4ef6\u5df2\u7ecf\u9ed8\u8ba4\u5185\u7f6e\uff0c\u4e0d\u9700\u8981\u5355\u72ec\u5b89\u88c5\u914d\u7f6e</p>",api:"<table>\n<thead>\n<tr>\n<th>\u5c5e\u6027\u540d</th>\n<th>\u8bf4\u660e</th>\n<th>\u7c7b\u578b</th>\n<th>\u9ed8\u8ba4\u503c</th>\n</tr>\n</thead>\n</table>",example:{isFull:!1,className:"OssUploadAdapterPlugin_5f179",style:"",list:[{title:"\u8fd9\u91cc\u586b\u5199\u793a\u4f8b\u6807\u9898",description:"\u8fd9\u91cc\u586b\u5199\u793a\u4f8b\u8bf4\u660e",code:'const {default: Editor} = _Editor;\nconst {useState} = React;\nconst BaseExample = () => {\n    const [value, onChange] = useState("<p>\u8bf7\u8f93\u5165\u5185\u5bb9</p>");\n    return <div>\n        <Editor.Field value={value} onChange={onChange} config={{\n            toolbar: {\n                items: ["imageUpload"]\n            }\n        }}/>\n        <div>\u9884\u89c8\uff1a</div>\n        <Editor.Content value={value}/>\n    </div>;\n};\n\nrender(<BaseExample/>);\n\n',scope:[{name:"_OssUploadAdapterPlugin",packageName:"@components/OssUploadAdapterPlugin",component:n(50737)},{name:"_Editor",packageName:"@components/Editor",component:o}]}]}}},a={name:"components-ckeditor",version:"0.1.1","open-version":!0,"public-url":"/components-ckeditor",modules:[{name:"Editor",baseDir:"/home/runner/work/components-ckeditor/components-ckeditor/src/components/Editor"},{name:"OssUploadAdapterPlugin",baseDir:"/home/runner/work/components-ckeditor/components-ckeditor/src/components/OssUploadAdapterPlugin"}]}},98139:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=s(e,a(n)))}return e}function a(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)o.call(e,n)&&e[n]&&(t=s(t,n));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}}]);
//# sourceMappingURL=949.fc8c85d5.chunk.js.map