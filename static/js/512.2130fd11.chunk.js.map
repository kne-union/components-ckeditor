{"version":3,"file":"static/js/512.2130fd11.chunk.js","mappings":"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","sources":["../node_modules/react/cjs/react-jsx-runtime.production.min.js","components/OssUploadAdapterPlugin/index.js","../node_modules/react/jsx-runtime.js","components/OssUploadAdapterPlugin/img_fail.svg","../node_modules/classnames/index.js","webpack://@kne-components/components-ckeditor/./src/components/Editor/style.module.scss?82a8","common/loadCKEditor.js","components/Editor/index.js"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","import imgFail from './img_fail.svg';\n\nconst resizeBase64Image = (base64, width, height) => {\n    return new Promise((resolve, reject) => {\n        const img = new Image();\n        img.src = base64;\n\n        img.onload = function () {\n            // 创建一个 Canvas 元素\n            const canvas = document.createElement('canvas');\n            const ctx = canvas.getContext('2d');\n\n            const wRatio = img.width / width, hRatio = img.height / height;\n            const ratio = Math.max(wRatio, hRatio, 1);\n\n            // 设置 Canvas 的宽度和高度为缩放后的尺寸\n            canvas.width = img.width / ratio;\n            canvas.height = img.height / ratio;\n\n            // 将图片绘制到 Canvas 上，并缩放\n            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n\n            // 从 Canvas 中获取缩放后的图片数据，并将其转换为 Base64 格式\n            const resizedBase64 = canvas.toDataURL('image/png'); // 可以根据需要更改图片格式\n            // 调用回调函数，返回缩放后的 Base64 图片\n            resolve(resizedBase64);\n        };\n\n        img.onerror = function (error) {\n            reject(error);\n        };\n    });\n}\n\nclass OssUploadAdapter {\n    constructor(loader, options) {\n        this.loader = loader;\n        this.options = options;\n        this.base64MaxWidth = options.base64MaxWidth || 600;\n        this.base64MaxHeight = options.base64MaxHeight || 600;\n    }\n\n    async upload() {\n        const file = await this.loader.file;\n        if (typeof this.options.upload !== 'function') {\n            console.warn('当前图片上传为base64模式，正式环境请在preset apis设置file.upload,或者给CKEditor组件传入 config.ossUpload.upload参数');\n            const data = await new Promise(resolve => {\n                const fileReader = new FileReader();\n                fileReader.onload = () => {\n                    resolve(fileReader.result);\n                };\n                fileReader.readAsDataURL(file);\n            });\n\n            return {\n                default: await resizeBase64Image(data, this.base64MaxWidth, this.base64MaxHeight)\n            };\n        }\n        const {data: resData} = await this.options.upload({file});\n        if (resData.code !== 0) {\n            this.options.message.error(resData.msg);\n            return {default: imgFail};\n        }\n        return {\n            default: resData.data\n        };\n    }\n}\n\nfunction OssUploadAdapterPlugin(editor) {\n    const message = editor.config.get('message');\n    const options = Object.assign({}, {message}, editor.config.get('ossUpload'));\n    editor.plugins.get('FileRepository').createUploadAdapter = loader => {\n        return new OssUploadAdapter(loader, options);\n    };\n    editor.editing.view.document.on('clipboardInput', (evt, data) => {\n        if (editor.isReadOnly) {\n            return;\n        }\n\n        const dataTransfer = data.dataTransfer;\n        const html = dataTransfer.getData('text/html');\n        const parser = new DOMParser();\n        const domDocument = parser.parseFromString(html, 'text/html');\n        if (domDocument.querySelectorAll('img').length === 0) {\n            return;\n        }\n        data.content = editor.data.htmlProcessor.toView('');\n        const loadingClose = message.loading('粘贴内容中含有图片，正在进行图片上传...', {duration: 0});\n        Promise.all([].slice.call(domDocument.querySelectorAll('img'), 0).map(async img => {\n            if (typeof options.uploadUrl !== 'function') {\n                console.warn('图片上传失败，请在preset apis设置file.uploadUrl,或者给CKEditor组件传入 config.ossUpload.uploadUrl参数');\n                return;\n            }\n            const {code, data, msg} = await options.uploadUrl({url: img.src});\n            if (code !== 0) {\n                console.warn(`图片上传失败，${msg}`);\n                img.src = imgFail;\n                return;\n            }\n            img.src = data;\n        }))\n            .then(() => {\n                editor.model.insertContent(editor.data.toModel(editor.data.htmlProcessor.toView(domDocument.documentElement.outerHTML)));\n            })\n            .finally(() => {\n                loadingClose();\n            });\n    });\n}\n\nexport default OssUploadAdapterPlugin;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","var _path, _path2;\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport * as React from \"react\";\nfunction SvgImgFail(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    t: 1695715120961,\n    className: \"icon\",\n    viewBox: \"0 0 1024 1024\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \"p-id\": 2413,\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 200,\n    height: 200,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M696.43 465.25c40.61 0 73.53-32.72 73.53-73.09s-32.96-73.08-73.53-73.08-73.54 32.72-73.54 73.08 32.92 73.09 73.54 73.09zM535.74 650.62l-273.61-259.4a56.19 56.19 0 0 0-15.36 11.58l-114 119.63-6-222.77c-0.73-26.82 20.84-49.41 47.67-50.14l201.77-5.44 47.34-50-250.43 6.75C119 202.33 76.33 247.17 77.78 301l7.32 271.4 4.5 166.78C91.06 793 136.05 835.47 190.2 834l176-4.75 12-0.32 47.34-50 116.18-122.64z\",\n    \"p-id\": 2414\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M861.71 214.8l-242.83-33.86-55.09 41.46L855 263a49.05 49.05 0 0 1 41.79 55.13l-54.33 389.59-120.87-159.05A59.86 59.86 0 0 0 638.06 537l-44 33.08 65.07 86.15L603.84 698l-79.57 60.1-54.92 41.48 34.17 4.76 270.73 37.76a97.55 97.55 0 0 0 109.88-79.6 22.37 22.37 0 0 0 0.65-3.44l60.53-434.16c7.44-53.32-29.95-102.62-83.6-110.1z\",\n    \"p-id\": 2415\n  })));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgImgFail);\nexport default __webpack_public_path__ + \"static/media/img_fail.92f698baf5c5ad60bf4437eb46f9525a.svg\";\nexport { ForwardRef as ReactComponent };","/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","// extracted by mini-css-extract-plugin\nexport default {\"editor\":\"style_editor__sRX1d__kusnU\",\"word-count\":\"style_word-count__8OS-O__kusnU\",\"surplus-count\":\"style_surplus-count__1Ml-M__kusnU\",\"error\":\"style_error__0sOJZ__kusnU\"};","import {createWithFetch} from '@kne/react-fetch';\nimport {getOrLoadRemote, getPublicPath} from '@kne/remote-loader';\n\nexport const loader = {\n    loading: null, loader: async ({params}) => {\n        const locale = params?.locale || 'zh-cn';\n        await getOrLoadRemote('ClassicEditor', '', getPublicPath('components-ckeditor') + `/ckeditor/${locale === 'zh-cn' ? 'zh-cn' : 'en'}/ckeditor.js`);\n        return {CKEditor: window.ClassicEditor};\n    }\n};\n\nconst loadCKEditor = createWithFetch(loader);\n\nexport default loadCKEditor;\n","import {useState} from 'react';\nimport style from './style.module.scss';\nimport {createWithRemoteLoader} from '@kne/remote-loader';\nimport {loader as ckEditorLoader} from '../../common/loadCKEditor';\nimport Fetch from '@kne/react-fetch';\nimport {CKEditor as CKEditorReact} from '@ckeditor/ckeditor5-react';\nimport classnames from 'classnames';\nimport useControlValue from '@kne/use-control-value';\nimport OssUploadAdapterPlugin from '@components/OssUploadAdapterPlugin';\nimport {App} from 'antd';\nimport merge from 'lodash/merge';\nimport './ckeditor5-content.css';\nimport './ckeditor.scss';\n\nconst CKContent = ({className, children}) => {\n    return <div className={classnames('ck ck-content', className)} dangerouslySetInnerHTML={{__html: children}}/>;\n};\n\nconst defaultEditorConfig = {\n    wordCount: {displayWords: false}, toolbar: {\n        items: ['undo', 'redo', '|', 'heading', 'style', '|', 'bold', 'italic', 'underline', 'strikethrough', 'link', 'bulletedList', 'numberedList', 'todoList', 'fontBackgroundColor', 'fontColor', 'fontSize', '|', 'alignment', 'pageBreak', 'outdent', 'indent', '|', 'specialCharacters', 'subscript', 'superscript', '|', 'imageUpload', 'blockQuote', 'insertTable', 'highlight', 'horizontalLine', '|', 'selectAll', 'removeFormat']\n    }, list: {\n        properties: {\n            styles: true, startIndex: true, reversed: true\n        }\n    }, style: {\n        definitions: [{\n            name: 'Headings', element: 'h2', classes: ['primary-part-title']\n        }, {\n            name: 'Subheadings', element: 'h3', classes: ['part-title']\n        }, {\n            name: 'Paragraph', element: 'p', classes: ['part-content']\n        }, {\n            name: 'Card', element: 'p', classes: ['card']\n        }, {\n            name: 'Primary Card', element: 'p', classes: ['primary-card']\n        }, {\n            name: 'Keywords', element: 'span', classes: ['key-word']\n        }]\n    }\n};\n\nconst Editor = ({locale, config, pluginLoaders = [], ...props}) => {\n    const {message} = App.useApp();\n    return <Fetch {...Object.assign({}, ckEditorLoader, {\n        params: {locale}\n    })} render={({data}) => {\n        const {CKEditor} = data;\n        const plugins = pluginLoaders.map(pluginLoader => pluginLoader(CKEditor.libs));\n        return <CKEditorReact {...props} editor={CKEditor}\n                              config={merge({}, {message}, defaultEditorConfig, config, {extraPlugins: [OssUploadAdapterPlugin, ...plugins]})}/>\n    }}/>\n};\n\nconst CKEditorField = createWithRemoteLoader({\n    modules: ['components-core:Global@usePreset']\n})(({remoteModules, ...p}) => {\n    const [usePreset] = remoteModules;\n    const {apis, locale} = usePreset();\n    const {className, config, pluginLoaders, data, maxLength, wordCount, ossUpload, ...props} = Object.assign({}, {\n        maxLength: 5000, pluginLoaders: [], wordCount: false\n    }, p);\n    const [value, onChange] = useControlValue(props);\n    const [currentCharacters, setCurrentCharacters] = useState(0);\n    const {message} = App.useApp();\n\n    return <div className={classnames(className, style['editor'])}>\n        <Editor locale={locale} onReady={editor => {\n            const wordCountPlugin = editor.plugins.get('WordCount');\n            setCurrentCharacters(wordCountPlugin.characters);\n        }} data={value} onChange={(event, editor) => {\n            const wordCountPlugin = editor.plugins.get('WordCount');\n            if (maxLength && wordCountPlugin.characters > maxLength) {\n                message.error('输入内容超过最大字符限制');\n                editor.setData(value);\n                return;\n            }\n            setCurrentCharacters(wordCountPlugin.characters);\n            const data = editor.getData();\n            onChange(data);\n        }} config={merge({\n            ossUpload: {\n                upload: apis?.file?.upload, uploadUrl: apis?.file?.uploadUrl\n            }\n        }, config, {ossUpload})}/>\n        {wordCount && <div className={style['word-count']}>\n            <div>当前字符:{currentCharacters}</div>\n            <div\n                className={classnames(style['surplus-count'], maxLength && {\n                    [style['error']]: maxLength - currentCharacters < 50\n                })}\n            >\n                剩余字符:{maxLength - currentCharacters}\n            </div>\n        </div>}\n    </div>\n});\n\nconst CKEditor = createWithRemoteLoader({\n    modules: ['components-core:FormInfo@hooks']\n})(({remoteModules, ...props}) => {\n    const [hooks] = remoteModules;\n    const {useDecorator} = hooks;\n    const render = useDecorator(Object.assign({}, props));\n    return render(CKEditorField);\n});\n\nCKEditor.Field = CKEditorField;\nCKEditor.Content = CKContent;\nCKEditor.defaultEditorConfig = defaultEditorConfig;\nexport default CKEditor;\n"],"names":["f","require","k","Symbol","for","l","m","Object","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","ref","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","type","props","_owner","current","exports","jsx","jsxs","OssUploadAdapter","constructor","loader","options","this","base64MaxWidth","base64MaxHeight","upload","file","console","warn","data","Promise","resolve","fileReader","FileReader","onload","result","readAsDataURL","default","base64","width","height","reject","img","Image","src","canvas","document","createElement","ctx","getContext","wRatio","hRatio","ratio","Math","max","drawImage","resizedBase64","toDataURL","onerror","error","resizeBase64Image","resData","code","message","msg","imgFail","editor","config","get","assign","plugins","createUploadAdapter","editing","view","on","evt","isReadOnly","html","dataTransfer","getData","domDocument","DOMParser","parseFromString","querySelectorAll","length","content","htmlProcessor","toView","loadingClose","loading","duration","all","slice","map","async","uploadUrl","url","then","model","insertContent","toModel","documentElement","outerHTML","finally","module","hasOwn","classNames","classes","i","arguments","arg","appendClass","parseValue","Array","isArray","apply","toString","includes","value","newClass","params","_ref","locale","getOrLoadRemote","getPublicPath","CKEditor","window","ClassicEditor","createWithFetch","defaultEditorConfig","wordCount","displayWords","toolbar","items","list","properties","styles","startIndex","reversed","style","definitions","name","element","Editor","_ref2","pluginLoaders","App","useApp","_jsx","Fetch","ckEditorLoader","render","_ref3","pluginLoader","libs","CKEditorReact","merge","extraPlugins","OssUploadAdapterPlugin","CKEditorField","createWithRemoteLoader","modules","_ref4","_apis$file","_apis$file2","remoteModules","usePreset","apis","className","maxLength","ossUpload","onChange","useControlValue","currentCharacters","setCurrentCharacters","useState","_jsxs","classnames","children","onReady","wordCountPlugin","characters","event","setData","_ref5","hooks","useDecorator","Field","Content","dangerouslySetInnerHTML","__html"],"sourceRoot":""}